stages:
  # # This stage is initially generated by:
  # dvc stage add -n julia_generate_csv_qrcode -o img/QRCode -o data/QRCode julia --project=@. scripts/generate_qrcode.jl
  # Referring: https://dvc.org/doc/command-reference/stage/add
  julia_generate_csv_qrcode:
    cmd: julia --project=@. scripts/generate_qrcode.jl
    outs:
      - data/QRCode
      - img/QRCode
  typst_compile:
    # # This stage is added by
    # dvc stage add -n typst_compile -d img/QRCode -d data/QRCode typst compile test_reply_sheet.typ
    cmd: typst compile test_reply_sheet.typ
    deps:
      - data/QRCode
      - img/QRCode
  update_quiz_score:
    # https://dvc.org/doc/user-guide/project-structure/dvcyaml-files#templating
    # dvc stage add -n update_quiz_score -p this_test -o data/quiz_score.csv julia --project=@. scripts/update_quiz_score.jl
    cmd: julia --project=@. scripts/update_quiz_score.jl ${this_test}
    params:
      - this_test
    outs:
      - data/quiz_score.csv:
          persist: true
